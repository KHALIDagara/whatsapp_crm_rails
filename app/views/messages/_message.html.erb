<div class="flex <%= message.from_me? ? 'justify-end' : 'justify-start' %>">
  <div class="max-w-xs md:max-w-md lg:max-w-lg px-3 py-2 rounded-lg <%= message.from_me? ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800' %>">
    
    <%# Render attachment if it exists %>
    <% if message.attachment.attached? %>
      <% if message.attachment.image? %>
        <%= image_tag message.attachment, class: "rounded-md mb-2" %>
      <% elsif message.attachment.audio? %>
        <audio controls class="w-full my-2">
          <source src="<%= url_for(message.attachment) %>" type="<%= message.attachment.content_type %>">
          Your browser does not support the audio element.
        </audio>
      <% end %>
    <% end %>

    <%# Render text body/caption if it exists %>
    <% if message.body.present? %>
      <p><%= message.body %></p>
    <% end %>
    
    <p class="text-xs text-right mt-1 <%= message.from_me? ? 'text-blue-100' : 'text-gray-500' %>">
      <%= message.sent_at.strftime("%I:%M %p") %>
    </p>
  </div>
</div>
