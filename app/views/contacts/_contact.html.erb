<%= fields_for "contacts[#{contact.id}]", contact do |fields| %>
  <tr class="<%= status_row_class(contact.status) %> border-b">
    <td class="w-4 p-4">
      <input type="checkbox" name="contact_ids[]" value="<%= contact.id %>" 
             class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"
             data-bulk-selection-target="checkbox">
    </td>

    <% base_input_classes = "w-full bg-transparent p-2 text-sm border-none focus:ring-2 focus:ring-blue-500 rounded-md" %>
    
    <td class="px-2 py-1"><%= fields.text_field :name, class: base_input_classes %></td>
    
    <td class="px-2 py-1"><%= fields.text_field :whatsapp_number, class: "#{base_input_classes} text-green-600 font-medium" %></td>
    
    <td class="px-2 py-1"><%= fields.text_field :country, class: base_input_classes %></td>
    
    <td class="px-2 py-1">
      <div class="relative">
        <%= fields.select :status, 
                           Contact.statuses.keys.map { |s| [s.humanize.titleize, s] }, 
                           {}, 
                           class: "#{base_input_classes} appearance-none pr-8", 
                           style: "background-image: url('data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 fill=%27none%27 viewBox=%270 0 20 20%27%3e%3cpath stroke=%27%236b7280%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%271.5%27 d=%27m6 8 4 4 4-4%27/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;" 
        %>
      </div>
    </td>
    
    <td class="px-2 py-1"><%= fields.text_field :tag_list, value: contact.tag_list.to_s, class: base_input_classes, placeholder: "tag1, tag2..." %></td>
    
    <td class="px-2 py-1"><%= fields.text_field :notes, class: base_input_classes %></td>
  </tr>
<% end %>
